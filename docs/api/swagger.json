{"openapi":"3.0.0","info":{"title":"Travel Planner API","description":"API docs for Konnected Platform Services","version":"1.0.0"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"def-0":{"type":"object","properties":{"TenantHeaderSchema":{"type":"object","properties":{"x-tenant-id":{"type":"string","minLength":1}},"required":["x-tenant-id"],"additionalProperties":false},"userIdParamsSchema":{"type":"object","properties":{"id":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"additionalProperties":false},"userRoleParamsSchema":{"type":"object","properties":{"userId":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"roleId":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}},"required":["userId","roleId"],"additionalProperties":false},"assignRolesBodySchema":{"type":"object","properties":{"roleIds":{"type":"array","items":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"minItems":1}},"required":["roleIds"],"additionalProperties":false},"userUpdateBodySchema":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string","format":"email"},"isActive":{"type":"boolean"}},"additionalProperties":false},"adminCreateUserSchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":8},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["email","password"],"additionalProperties":false},"inviteUserSchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["email"],"additionalProperties":false},"roleIdParamsSchema":{"type":"object","properties":{"id":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"additionalProperties":false},"createRoleBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"additionalProperties":false},"updateRoleBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"additionalProperties":false},"permissionIdParamsSchema":{"type":"object","properties":{"id":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"additionalProperties":false},"createPermissionBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"additionalProperties":false},"assignPermissionsBodySchema":{"type":"object","properties":{"permissionIds":{"type":"array","items":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"minItems":1}},"required":["permissionIds"],"additionalProperties":false},"rolePermissionParamsSchema":{"type":"object","properties":{"roleId":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"permissionId":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"}},"required":["roleId","permissionId"],"additionalProperties":false},"registerInvitedUserSchema":{"type":"object","properties":{"invitationToken":{"type":"string","minLength":1},"password":{"type":"string","minLength":8},"name":{"type":"string"}},"required":["invitationToken","password"],"additionalProperties":false},"loginSchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":1}},"required":["email","password"],"additionalProperties":false},"loginResponseSchema":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}},"required":["id","email","roles"],"additionalProperties":false}},"required":["accessToken","refreshToken","user"],"additionalProperties":false},"refreshTokenSchema":{"type":"object","properties":{"refreshToken":{"type":"string","minLength":1}},"required":["refreshToken"],"additionalProperties":false},"forgotPasswordSchema":{"type":"object","properties":{"email":{"type":"string","format":"email"}},"required":["email"],"additionalProperties":false},"resetPasswordSchema":{"type":"object","properties":{"token":{"type":"string","minLength":1},"newPassword":{"type":"string","minLength":8}},"required":["token","newPassword"],"additionalProperties":false},"verifyEmailSchema":{"type":"object","properties":{"token":{"type":"string","minLength":1}},"required":["token"],"additionalProperties":false},"registerOrganizationSchema":{"type":"object","properties":{"organizationName":{"type":"string","minLength":3},"organizationSlug":{"type":"string","minLength":3,"maxLength":15,"pattern":"^[a-z-]+$"},"adminEmail":{"type":"string","format":"email"},"adminPassword":{"type":"string","minLength":10},"adminName":{"type":"string"}},"required":["organizationName","organizationSlug","adminEmail","adminPassword","adminName"],"additionalProperties":false,"description":"RegisterOrganizationRequestBody"},"registerOrganizationResponseSchema":{"type":"object","properties":{"message":{"type":"string","description":"Confirmation message","enum":["Organization registered successfully. Admin user created."]},"tenantId":{"type":"string","format":"uuid","description":"The UUID of the newly created tenant"},"adminUserId":{"type":"string","format":"uuid","description":"The UUID of the created admin user"},"accessToken":{"type":"string","description":"JWT access token for the admin user"},"refreshToken":{"type":"string","description":"JWT refresh token for the admin user"}},"required":["message","tenantId","adminUserId","accessToken","refreshToken"],"additionalProperties":false,"description":"RegisterOrganizationResponse"},"AuthenticatedUserSchema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string","format":"email"},"roles":{"type":"array","items":{"type":"string"}},"tenantId":{"type":"string"},"tenantSlug":{"type":"string"}},"required":["id","email","roles","tenantId"],"additionalProperties":false},"RegisterRequestBodySchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":8},"name":{"type":"string"}},"required":["email","password"],"additionalProperties":false},"LoginRequestBodySchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string"}},"required":["email","password"],"additionalProperties":false},"RefreshTokenRequestBodySchema":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"],"additionalProperties":false},"RegisterOrganizationRequestBodySchema":{"type":"object","properties":{"organizationName":{"type":"string"},"organizationSlug":{"type":"string"},"adminEmail":{"type":"string","format":"email"},"adminPassword":{"type":"string","minLength":8},"adminName":{"type":"string"}},"required":["organizationName","adminEmail","adminPassword"],"additionalProperties":false},"InviteUserRequestBodySchema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string"}}},"required":["email"],"additionalProperties":false},"AssignRolesRequestBodySchema":{"type":"object","properties":{"roleIds":{"type":"array","items":{"type":"string"},"minItems":1}},"required":["roleIds"],"additionalProperties":false},"UserIdParamsSchema":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"additionalProperties":false},"UserRoleParamsSchema":{"type":"object","properties":{"userId":{"type":"string"},"roleId":{"type":"string"}},"required":["userId","roleId"],"additionalProperties":false},"UserUpdateRequestBodySchema":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string","format":"email"},"isActive":{"type":"boolean"}},"additionalProperties":false},"CreateRoleRequestBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"additionalProperties":false},"UpdateRoleRequestBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"additionalProperties":false},"RoleIdParamsSchema":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"additionalProperties":false},"AssignPermissionsRequestBodySchema":{"type":"object","properties":{"permissionIds":{"type":"array","items":{"type":"string"},"minItems":1}},"required":["permissionIds"],"additionalProperties":false},"RolePermissionParamsSchema":{"type":"object","properties":{"roleId":{"type":"string"},"permissionId":{"type":"string"}},"required":["roleId","permissionId"],"additionalProperties":false},"CreatePermissionRequestBodySchema":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"additionalProperties":false},"PermissionIdParamsSchema":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"additionalProperties":false}},"required":["TenantHeaderSchema","userIdParamsSchema","userRoleParamsSchema","assignRolesBodySchema","userUpdateBodySchema","adminCreateUserSchema","inviteUserSchema","roleIdParamsSchema","createRoleBodySchema","updateRoleBodySchema","permissionIdParamsSchema","createPermissionBodySchema","assignPermissionsBodySchema","rolePermissionParamsSchema","registerInvitedUserSchema","loginSchema","loginResponseSchema","refreshTokenSchema","forgotPasswordSchema","resetPasswordSchema","verifyEmailSchema","registerOrganizationSchema","registerOrganizationResponseSchema","AuthenticatedUserSchema","RegisterRequestBodySchema","LoginRequestBodySchema","RefreshTokenRequestBodySchema","RegisterOrganizationRequestBodySchema","InviteUserRequestBodySchema","AssignRolesRequestBodySchema","UserIdParamsSchema","UserRoleParamsSchema","UserUpdateRequestBodySchema","CreateRoleRequestBodySchema","UpdateRoleRequestBodySchema","RoleIdParamsSchema","AssignPermissionsRequestBodySchema","RolePermissionParamsSchema","CreatePermissionRequestBodySchema","PermissionIdParamsSchema"],"additionalProperties":false,"title":"allSchemas"}}},"paths":{"/auth/login":{"post":{"summary":"user login","tags":["Auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/loginSchema"}}}},"parameters":[{"schema":{"type":"string","minLength":1},"in":"header","name":"x-tenant-id","required":true}],"security":[],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/loginResponseSchema"}}}}}}},"/admin/users":{"get":{"summary":"Get all users","tags":["User"],"responses":{"200":{"description":"Default Response"}}},"post":{"summary":"Create a new admin user","tags":["User"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/adminCreateUserSchema"}}}},"responses":{"200":{"description":"Default Response"}}}},"/admin/users/{id}":{"get":{"summary":"Get user by ID","tags":["User"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}},"put":{"summary":"Update user details","tags":["User"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/userUpdateBodySchema"}}}},"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}},"delete":{"summary":"Delete user by ID","tags":["User"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/users/invite":{"post":{"summary":"Invite a user via email","tags":["User"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/inviteUserSchema"}}}},"responses":{"200":{"description":"Default Response"}}}},"/admin/users/{userId}/roles":{"post":{"summary":"Assign roles to a user","tags":["Role"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/assignRolesBodySchema"}}}},"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/users/{userId}/roles/{roleId}":{"delete":{"summary":"Revoke a role from a user","tags":["Role"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"userId","required":true},{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"roleId","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/roles":{"get":{"summary":"Get all roles","tags":["Role"],"responses":{"200":{"description":"Default Response"}}},"post":{"summary":"Create a new role","tags":["Role"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/createRoleBodySchema"}}}},"responses":{"200":{"description":"Default Response"}}}},"/admin/roles/{id}":{"put":{"summary":"Update role by ID","tags":["Role"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/updateRoleBodySchema"}}}},"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}},"delete":{"summary":"Delete role by ID","tags":["Role"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/permissions":{"get":{"summary":"Get all permissions","tags":["Permission"],"responses":{"200":{"description":"Default Response"}}},"post":{"summary":"Create a new permission","tags":["Permission"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/createPermissionBodySchema"}}}},"responses":{"200":{"description":"Default Response"}}}},"/admin/permissions/{id}":{"delete":{"summary":"Delete permission by ID","tags":["Permission"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/roles/{roleId}/permissions":{"post":{"summary":"Assign permissions to a role","tags":["Permission"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/assignPermissionsBodySchema"}}}},"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/admin/roles/{roleId}/permissions/{permissionId}":{"delete":{"summary":"Revoke a permission from a role","tags":["Permission"],"parameters":[{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"roleId","required":true},{"schema":{"type":"string","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"permissionId","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/onboarding/register-organization":{"post":{"summary":"Register a new organization and admin user","tags":["Onboarding"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/registerOrganizationSchema"}}}},"security":[],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-0/properties/registerOrganizationResponseSchema"}}}}}}}},"servers":[{"url":"http://localhost:5001/api/v1","description":"Local dev server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Onboarding","description":"Onboarding related end-points"},{"name":"User","description":"User related end-points"},{"name":"Role","description":"Role related end-points"},{"name":"Permission","description":"Permission related end-points"},{"name":"Auth","description":"Auth related end-points"}]}