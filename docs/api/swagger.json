{"openapi":"3.0.0","info":{"title":"Travel Planner API","description":"API docs for Konnected Platform Services","version":"1.0.0"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"def-0":{"type":"object","properties":{"x-tenant-id":{"type":"string","minLength":1}},"required":["x-tenant-id"],"title":"Header"},"def-1":{"type":"object","properties":{"id":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"title":"userIdParams"},"def-2":{"type":"object","properties":{"userId":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"},"roleId":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}},"required":["userId","roleId"],"title":"userRoleParams"},"def-3":{"type":"object","properties":{"roleIds":{"minItems":1,"type":"array","items":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["roleIds"],"title":"assignRolesBody"},"def-4":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"isActive":{"type":"boolean"}},"additionalProperties":false,"title":"userUpdateBody"},"def-5":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"password":{"type":"string","minLength":8},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["email","password"],"title":"adminCreateUser"},"def-6":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["email"],"title":"inviteUser"},"def-7":{"type":"object","properties":{"id":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"title":"roleIdParams"},"def-8":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"title":"createRoleBody"},"def-9":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"additionalProperties":false,"title":"updateRoleBody"},"def-10":{"type":"object","properties":{"id":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}},"required":["id"],"title":"permissionIdParams"},"def-11":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"title":"createPermissionBody"},"def-12":{"type":"object","properties":{"permissionIds":{"minItems":1,"type":"array","items":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}}},"required":["permissionIds"],"title":"assignPermissionsBody"},"def-13":{"type":"object","properties":{"roleId":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"},"permissionId":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"}},"required":["roleId","permissionId"],"title":"rolePermissionParams"},"def-14":{"type":"object","properties":{"invitationToken":{"type":"string","minLength":1},"password":{"type":"string","minLength":8},"name":{"type":"string"}},"required":["invitationToken","password"],"title":"registerInvitedUser"},"def-15":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"password":{"type":"string","minLength":1}},"required":["email","password"],"title":"login"},"def-16":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"name":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}},"required":["id","email","roles"]}},"required":["accessToken","refreshToken","user"],"title":"loginResponse"},"def-17":{"type":"object","properties":{"refreshToken":{"type":"string","minLength":1}},"required":["refreshToken"],"title":"refreshToken"},"def-18":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"}},"required":["email"],"title":"forgotPassword"},"def-19":{"type":"object","properties":{"token":{"type":"string","minLength":1},"newPassword":{"type":"string","minLength":8}},"required":["token","newPassword"],"title":"resetPassword"},"def-20":{"type":"object","properties":{"token":{"type":"string","minLength":1}},"required":["token"],"title":"verifyEmail"},"def-21":{"description":"RegisterOrganizationRequestBody","type":"object","properties":{"organizationName":{"type":"string","minLength":3},"organizationSlug":{"type":"string","minLength":3,"maxLength":15,"pattern":"^[a-z-]+$"},"adminEmail":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"adminPassword":{"type":"string","minLength":10},"adminName":{"type":"string"}},"required":["organizationName","organizationSlug","adminEmail","adminPassword","adminName"],"title":"registerOrganization"},"def-22":{"description":"RegisterOrganizationResponse","type":"object","properties":{"message":{"description":"Confirmation message","type":"string","enum":["Organization registered successfully. Admin user created."]},"tenantId":{"description":"The UUID of the newly created tenant","type":"string","format":"uuid","pattern":"^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$"},"adminUserId":{"description":"The UUID of the created admin user","type":"string","format":"uuid","pattern":"^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$"},"accessToken":{"description":"JWT access token for the admin user","type":"string"},"refreshToken":{"description":"JWT refresh token for the admin user","type":"string"}},"required":["message","tenantId","adminUserId","accessToken","refreshToken"],"title":"registerOrganizationResponse"},"def-23":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"roles":{"type":"array","items":{"type":"string"}},"tenantId":{"type":"string"},"tenantSlug":{"type":"string"}},"required":["id","email","roles","tenantId"],"title":"AuthenticatedUser"},"def-24":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"password":{"type":"string"}},"required":["email","password"],"title":"LoginRequestBody"},"def-25":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"],"title":"RefreshTokenRequestBody"},"def-26":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"name":{"type":"string"},"roleIds":{"type":"array","items":{"type":"string"}}},"required":["email"],"title":"InviteUserRequestBody"},"def-27":{"type":"object","properties":{"roleIds":{"minItems":1,"type":"array","items":{"type":"string"}}},"required":["roleIds"],"title":"AssignRolesRequestBody"},"def-28":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"title":"UserIdParams"},"def-29":{"type":"object","properties":{"userId":{"type":"string"},"roleId":{"type":"string"}},"required":["userId","roleId"],"title":"UserRoleParams"},"def-30":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"isActive":{"type":"boolean"}},"title":"UserUpdateRequestBody"},"def-31":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"title":"CreateRoleRequestBody"},"def-32":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"title":"UpdateRoleRequestBody"},"def-33":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"title":"RoleIdParams"},"def-34":{"type":"object","properties":{"permissionIds":{"minItems":1,"type":"array","items":{"type":"string"}}},"required":["permissionIds"],"title":"AssignPermissionsRequestBody"},"def-35":{"type":"object","properties":{"roleId":{"type":"string"},"permissionId":{"type":"string"}},"required":["roleId","permissionId"],"title":"RolePermissionParams"},"def-36":{"type":"object","properties":{"name":{"type":"string","minLength":1},"description":{"type":"string"}},"required":["name"],"title":"CreatePermissionRequestBody"},"def-37":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"],"title":"PermissionIdParams"}}},"paths":{"/auth/login":{"post":{"summary":"user login","tags":["Auth"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"password":{"type":"string"}},"required":["email","password"]}}},"required":true},"parameters":[{"schema":{"type":"string","minLength":1},"in":"header","name":"x-tenant-id","required":true}],"security":[],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"name":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}},"required":["id","email","roles"],"additionalProperties":false}},"required":["accessToken","refreshToken","user"],"additionalProperties":false}}}}}}},"/admin/users":{"get":{"summary":"Get all users","tags":["User"],"responses":{"200":{"description":"Default Response"}}}},"/admin/users/{id}":{"get":{"summary":"Get user by ID","tags":["User"],"parameters":[{"schema":{"type":"string","format":"cuid","pattern":"^[cC][^\\s-]{8,}$"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response"}}}},"/onboarding/register-organization":{"post":{"summary":"Register a new organization and admin user","tags":["Onboarding"],"requestBody":{"content":{"application/json":{"schema":{"description":"RegisterOrganizationRequestBody","type":"object","properties":{"organizationName":{"type":"string","minLength":3},"organizationSlug":{"type":"string","minLength":3,"maxLength":15,"pattern":"^[a-z-]+$"},"adminEmail":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"},"adminPassword":{"type":"string","minLength":10},"adminName":{"type":"string"}},"required":["organizationName","organizationSlug","adminEmail","adminPassword","adminName"]}}},"required":true,"description":"RegisterOrganizationRequestBody"},"security":[],"responses":{"200":{"description":"RegisterOrganizationResponse","content":{"application/json":{"schema":{"description":"RegisterOrganizationResponse","type":"object","properties":{"message":{"description":"Confirmation message","type":"string","enum":["Organization registered successfully. Admin user created."]},"tenantId":{"description":"The UUID of the newly created tenant","type":"string","format":"uuid","pattern":"^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$"},"adminUserId":{"description":"The UUID of the created admin user","type":"string","format":"uuid","pattern":"^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$"},"accessToken":{"description":"JWT access token for the admin user","type":"string"},"refreshToken":{"description":"JWT refresh token for the admin user","type":"string"}},"required":["message","tenantId","adminUserId","accessToken","refreshToken"],"additionalProperties":false}}}}}}},"/health":{"get":{"summary":"Health check","tags":["Common"],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string"},"uptime":{"type":"number"},"timestamp":{"type":"string"}},"required":["status","uptime","timestamp"],"additionalProperties":false}}}}}}}},"servers":[{"url":"http://localhost:5001/api/v1","description":"Local dev server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Onboarding","description":"Onboarding related end-points"},{"name":"User","description":"User related end-points"},{"name":"Role","description":"Role related end-points"},{"name":"Permission","description":"Permission related end-points"},{"name":"Auth","description":"Auth related end-points"}]}